<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='Using the runjags (Denwood 2016) package to produce JAGS-based forecasts. 
fit_runjags: Wraps up the runjags model object preparation functions with the model running (run.jags function in the runjags (Denwood 2016) package) we use to run JAGS (Plummer 2003) models in portalcasting. 
runjags_data, runjags_monitor, runjags_model, runjags_inits: Produce the model-specific components as named. 
forecast.runjags: A convenience function for extracting existing forecasts from runjags objects and summarizing them into a "forecast"-class object. 
runjags_controls: Combines the run.jags control parameters that users may be interested in changing with a few portalcasting-specific parameters into a control list for input into specific model functions.'><title>Create and Run a runjags Portalcasting Model — runjags models • portalcasting</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create and Run a runjags Portalcasting Model — runjags models"><meta property="og:description" content='Using the runjags (Denwood 2016) package to produce JAGS-based forecasts. 
fit_runjags: Wraps up the runjags model object preparation functions with the model running (run.jags function in the runjags (Denwood 2016) package) we use to run JAGS (Plummer 2003) models in portalcasting. 
runjags_data, runjags_monitor, runjags_model, runjags_inits: Produce the model-specific components as named. 
forecast.runjags: A convenience function for extracting existing forecasts from runjags objects and summarizing them into a "forecast"-class object. 
runjags_controls: Combines the run.jags control parameters that users may be interested in changing with a few portalcasting-specific parameters into a control list for input into specific model functions.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">portalcasting</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.55.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/getting_started.html">Getting Started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/current_models.html">Current Models</a>
    <a class="dropdown-item" href="../articles/adding_model_and_data.html">Adding a Model and Data</a>
    <a class="dropdown-item" href="../articles/codebase.html">Codebase</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://github.com/weecology/portalcasting/releases/tag/v0.51.0">Version 0.51.0</a>
    <a class="external-link dropdown-item" href="https://github.com/weecology/portalcasting/releases/tag/v0.50.0">Version 0.50.0</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/weecology" aria-label="Twitter">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/weecology" aria-label="GitHub">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://portal.naturecast.org" aria-label="Naturecast">
    <span class="fa fa-chart-line"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create and Run a runjags Portalcasting Model</h1>
      <small class="dont-index">Source: <a href="https://github.com/weecology/portalcasting/blob/HEAD/R/models_jags.R" class="external-link"><code>R/models_jags.R</code></a></small>
      <div class="d-none name"><code>runjags-models.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Using the runjags (Denwood 2016) package to produce JAGS-based forecasts. <br><code>fit_runjags</code>: Wraps up the runjags model object preparation functions with the model running (<code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code> function in the runjags (Denwood 2016) package) we use to run JAGS (Plummer 2003) models in portalcasting. <br><code>runjags_data</code>, <code>runjags_monitor</code>, <code>runjags_model</code>, <code>runjags_inits</code>: Produce the model-specific components as named. <br><code>forecast.runjags</code>: A convenience function for extracting existing forecasts from runjags objects and summarizing them into a <code>"forecast"</code>-class object. <br><code>runjags_controls</code>: Combines the <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code> control parameters that users may be interested in changing with a few portalcasting-specific parameters into a control list for input into specific model functions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">runjags_inits</span><span class="op">(</span><span class="va">inits</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">runjags_model</span><span class="op">(</span><span class="va">model_file</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">runjags_monitors</span><span class="op">(</span><span class="va">monitors</span>, <span class="va">metadata</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">runjags_data</span><span class="op">(</span><span class="va">data_names</span>, <span class="va">abundance</span>, <span class="va">metadata</span>, <span class="va">covariates</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">fit_runjags</span><span class="op">(</span></span>
<span>  <span class="va">abundance</span>,</span>
<span>  <span class="va">metadata</span>,</span>
<span>  <span class="va">covariates</span>,</span>
<span>  <span class="va">monitors</span>,</span>
<span>  <span class="va">inits</span>,</span>
<span>  <span class="va">model_file</span>,</span>
<span>  <span class="va">data_names</span>,</span>
<span>  control_runjags <span class="op">=</span> <span class="fu">runjags_controls</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for runjags</span></span>
<span><span class="fu"><a href="https://generics.r-lib.org/reference/forecast.html" class="external-link">forecast</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">h</span>, <span class="va">level</span>, <span class="va">nsamples</span>, seed <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">runjags_controls</span><span class="op">(</span></span>
<span>  nchains <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  adapt <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  burnin <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  sample <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  thin <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  modules <span class="op">=</span> <span class="st">"glm"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"interruptible"</span>,</span>
<span>  factories <span class="op">=</span> <span class="st">""</span>,</span>
<span>  mutate <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  silent_jags <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>inits</dt>
<dd><p><code>list</code> of model parameter initializer functions. See <code><a href="prefabricated-models.html">prefab_models_controls</a></code>.</p></dd>


<dt>model_file</dt>
<dd><p><code>character</code> value of the model file name. See <code><a href="prefabricated-models.html">prefab_models_controls</a></code>.</p></dd>


<dt>monitors</dt>
<dd><p><code>character</code> vector of parameters to track. Forecasted observations and state variables are tracked automatically.</p></dd>


<dt>metadata</dt>
<dd><p><code>list</code> of model control elements. See <code><a href="prepare-metadata.html">prepare_metadata</a></code>.</p></dd>


<dt>data_names</dt>
<dd><p><code>character</code> vector of data values to include in the data <code>list</code>. See <code><a href="prefabricated-models.html">prefab_models_controls</a></code>.</p></dd>


<dt>abundance</dt>
<dd><p>Non-negative <code>integer</code>-conformable vector of rodent abundances to use in forecasting. See <code><a href="prepare-rodents.html">prepare_abundance</a></code>.</p></dd>


<dt>covariates</dt>
<dd><p><code>data.frame</code> of covariates used in modeling. See <code><a href="prepare-covariates.html">prepare_covariates</a></code>.</p></dd>


<dt>control_runjags</dt>
<dd><p><code>list</code> of controls for running runjags models. See <code>runjags_controls</code>. Optional. If not provided here, will be taken from the model controls list.</p></dd>


<dt>object</dt>
<dd><p>A <code>runjags</code>-class object with columns of <code>"X"</code> values (state variables) in the the <code>mcmc</code> element.</p></dd>


<dt>h</dt>
<dd><p><code>integer</code>-conformable number of steps forward to include in the forecast.</p></dd>


<dt>level</dt>
<dd><p><code>numeric</code> of the confidence level to use in summarizing the predictions.</p></dd>


<dt>nsamples</dt>
<dd><p><code>integer</code> (or integer <code>numeric</code>) number of samples used to summarizing model output of sample-based estimates.</p></dd>


<dt>seed</dt>
<dd><p>A single <code>integer</code>-conformable value or <code>NULL</code> set in <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></code>.</p></dd>


<dt>...</dt>
<dd><p>Additional parameters</p></dd>


<dt>nchains</dt>
<dd><p>Non-negative <code>integer</code>-conformable value of the number of parallel chains to use. See <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code>.</p></dd>


<dt>adapt</dt>
<dd><p>Non-negative <code>integer</code>-conformable value of the number of adaptation steps to use. See <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code>.</p></dd>


<dt>burnin</dt>
<dd><p>Non-negative <code>integer</code>-conformable value of the number of burnin steps to use. See <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code>.</p></dd>


<dt>sample</dt>
<dd><p>Non-negative <code>integer</code>-conformable value of the number of sampling steps to use. See <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code>.</p></dd>


<dt>thin</dt>
<dd><p>Positive <code>integer</code>-conformable value of the thinning interval to use. See <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code>.</p></dd>


<dt>modules</dt>
<dd><p><code>character</code> vector of external modules to add to JAGS. See <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code>.</p></dd>


<dt>method</dt>
<dd><p><code>character</code> value of the <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code> method to use. Options include <code>"rjags"</code>, <code>"simple"</code>, <code>"interruptible"</code>, <code>"parallel"</code>, <code>"rjparallel"</code>, <code>"background"</code>, <code>"bgparallel"</code>, and <code>"snow"</code>. See <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code>.</p></dd>


<dt>factories</dt>
<dd><p><code>character</code> vector of factory modules to add to JAGS. See <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code>.</p></dd>


<dt>mutate</dt>
<dd><p>A <code>function</code> or <code>list</code> (with the first element being a <code>function</code>) used to add variables to the posterior chain (rather than throughout sampling). See <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code>.</p></dd>


<dt>silent_jags</dt>
<dd><p><code>logical</code> value for quieting the output from the runjags function, including the underlying JAGS output.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>fit_runjags</code>: An object of class <code>"runjags"</code> of model components. See <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code>. <br></p>


<p><code>runjags_data</code>: A <code>list</code> of model-specific data for use in <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code>. <br></p>


<p><code>runjags_monitor</code>: A <code>vector</code> of model-specific <code>character</code> values of parameters to track in <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code>.  <br></p>


<p><code>runjags_model</code>: A single <code>character</code> value of the JAGS model block for <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code>.  <br></p>


<p><code>runjags_inits</code>: A <code>function</code> that takes the argument <code>data</code> to produce chain-specific initial values for <code><a href="https://rdrr.io/pkg/runjags/man/run.jags.html" class="external-link">run.jags</a></code>. <br></p>


<p><code>runjags_controls</code>: A <code>list</code> of controls. <br></p>


<p><code>forecast.runjags</code>: <code>list</code> with <code>"forecast"</code>-class with named elements including <code>"mean"</code>, <code>"lower"</code>, <code>"upper"</code>, and <code>"level"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Denwood, M. J. 2016. runjags: an R package providing interface utilities, model templates, parallel computing methods and additional distributions for MCMC models in JAGS. Journal of Statistical Software, 71:9. <a href="https://www.jstatsoft.org/article/view/v071i09" class="external-link">URL</a>.</p>
<p>Plummer, M. 2003. JAGS: A program for analysis of Bayesian graphical models using Gibbs Sampling. Proceedings of the 3rd International Workshop on Distributed Statistical Computing (DSC 2003). ISSN 1609-395X.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Helper functions for prefab models:
<code><a href="prefabricated-models.html">prefabricated models</a></code>,
<code><a href="tsglm-models.html">tsglm models</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>   <span class="va">main1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"runjags"</span><span class="op">)</span></span>
<span></span>
<span>   <span class="fu"><a href="directory-creation.html">setup_dir</a></span><span class="op">(</span>main <span class="op">=</span> <span class="va">main1</span><span class="op">)</span></span>
<span>   <span class="va">dataset</span>    <span class="op">&lt;-</span> <span class="st">"all"</span></span>
<span>   <span class="va">species</span>    <span class="op">&lt;-</span> <span class="st">"DM"</span></span>
<span>   <span class="va">model</span>      <span class="op">&lt;-</span> <span class="st">"jags_RW"</span></span>
<span>   <span class="va">model_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"'"</span>, <span class="st">""</span>,</span>
<span>                      <span class="fu"><a href="prepare-models.html">models_controls</a></span><span class="op">(</span><span class="va">main1</span><span class="op">)</span><span class="op">[[</span><span class="va">model</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">fit</span><span class="op">$</span><span class="va">full_model_file</span><span class="op">)</span></span>
<span> </span>
<span>   <span class="va">abundance</span>      <span class="op">&lt;-</span> <span class="fu"><a href="prepare-rodents.html">prepare_abundance</a></span><span class="op">(</span>main    <span class="op">=</span> <span class="va">main1</span>,</span>
<span>                                       dataset <span class="op">=</span> <span class="va">dataset</span>,</span>
<span>                                       species <span class="op">=</span> <span class="va">species</span>,</span>
<span>                                       model   <span class="op">=</span> <span class="va">model</span><span class="op">)</span></span>
<span>   <span class="va">model_controls</span> <span class="op">&lt;-</span> <span class="fu"><a href="prepare-models.html">models_controls</a></span><span class="op">(</span>main       <span class="op">=</span> <span class="va">main1</span>,</span>
<span>                                     models     <span class="op">=</span> <span class="va">model</span><span class="op">)</span><span class="op">[[</span><span class="va">model</span><span class="op">]</span><span class="op">]</span></span>
<span>   <span class="va">metadata</span>       <span class="op">&lt;-</span> <span class="fu"><a href="read-write-data.html">read_metadata</a></span><span class="op">(</span>main        <span class="op">=</span> <span class="va">main1</span><span class="op">)</span></span>
<span>   <span class="va">newmoons</span>       <span class="op">&lt;-</span> <span class="fu"><a href="read-write-data.html">read_newmoons</a></span><span class="op">(</span>main        <span class="op">=</span> <span class="va">main1</span><span class="op">)</span>                                        </span>
<span>   <span class="va">covariates</span>     <span class="op">&lt;-</span> <span class="fu"><a href="read-write-data.html">read_covariates</a></span><span class="op">(</span>main      <span class="op">=</span> <span class="va">main1</span><span class="op">)</span></span>
<span>   <span class="va">control_runjags</span> <span class="op">&lt;-</span> <span class="fu">runjags_controls</span><span class="op">(</span>nchains <span class="op">=</span> <span class="fl">3</span>, </span>
<span>                                       adapt   <span class="op">=</span> <span class="fl">1e3</span>, </span>
<span>                                       burnin  <span class="op">=</span> <span class="fl">1e3</span>, </span>
<span>                                       sample  <span class="op">=</span> <span class="fl">1e3</span>, </span>
<span>                                       thin    <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>   <span class="va">data_names</span>      <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count"</span>, <span class="st">"N"</span>, <span class="st">"log_mean_count"</span><span class="op">)</span></span>
<span></span>
<span>   <span class="fu">runjags_model</span><span class="op">(</span>model_file <span class="op">=</span> <span class="va">model_file</span><span class="op">)</span></span>
<span></span>
<span>   <span class="fu">runjags_monitors</span><span class="op">(</span>monitors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mu"</span>, <span class="st">"sigma"</span><span class="op">)</span>,</span>
<span>                    metadata <span class="op">=</span> <span class="va">metadata</span><span class="op">)</span></span>
<span></span>
<span>   <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">runjags_data</span><span class="op">(</span>data_names <span class="op">=</span> <span class="va">data_names</span>,</span>
<span>                        abundance  <span class="op">=</span> <span class="va">abundance</span>,</span>
<span>                        metadata   <span class="op">=</span> <span class="va">metadata</span>,</span>
<span>                        covariates <span class="op">=</span> <span class="va">covariates</span><span class="op">)</span></span>
<span></span>
<span>   <span class="fu">runjags_inits</span><span class="op">(</span>inits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mu    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span>, mean <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">log_mean_count</span>, sd <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>                              sigma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, min  <span class="op">=</span> <span class="fl">0.01</span>, max <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>   <span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">fit_runjags</span><span class="op">(</span>abundance       <span class="op">=</span> <span class="va">abundance</span>, </span>
<span>                      metadata        <span class="op">=</span> <span class="va">metadata</span>,</span>
<span>                      covariates      <span class="op">=</span> <span class="va">covariates</span>, </span>
<span>                      monitors        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mu"</span>, <span class="st">"sigma"</span><span class="op">)</span>, </span>
<span>                      inits           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mu    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">data</span><span class="op">$</span><span class="va">log_mean_count</span>, <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>                                             sigma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.01</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                      model_file      <span class="op">=</span> <span class="va">model_file</span>,</span>
<span>                      data_names      <span class="op">=</span> <span class="va">data_names</span>,</span>
<span>                      control_runjags <span class="op">=</span> <span class="va">control_runjags</span><span class="op">)</span></span>
<span> </span>
<span>   <span class="fu"><a href="https://generics.r-lib.org/reference/forecast.html" class="external-link">forecast</a></span><span class="op">(</span>object   <span class="op">=</span> <span class="va">fit</span>,  </span>
<span>            h        <span class="op">=</span> <span class="va">metadata</span><span class="op">$</span><span class="va">time</span><span class="op">$</span><span class="va">lead_time_newmoons</span>,   </span>
<span>            level    <span class="op">=</span> <span class="va">metadata</span><span class="op">$</span><span class="va">confidence_level</span>,   </span>
<span>            nsamples <span class="op">=</span> <span class="va">metadata</span><span class="op">$</span><span class="va">nsamples</span><span class="op">)</span></span>
<span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">main1</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://www.dapperstats.com/author/dr.-juniper-l.-simonis/" class="external-link">Juniper L. Simonis</a>, <a href="https://www.weecology.org/author/glenda-m.-yenni/" class="external-link">Glenda M. Yenni</a>, <a href="https://nature.arizona.edu/ellen-bledsoe" class="external-link">Ellen K. Bledsoe</a>, <a href="https://scholar.google.com/citations?user=_cBpCegAAAAJ&amp;hl=en" class="external-link">Erica M. Christensen</a>, Patricia K. T. Dumandan, <a href="https://www.weecology.org/author/henry-senyondo/" class="external-link">Henry Senyondo</a>, <a href="https://haoye.us/" class="external-link">Hao Ye</a>, <a href="https://www.weecology.org/author/ethan-white/" class="external-link">Ethan P. White</a>, <a href="https://www.weecology.org/author/morgan-ernest/" class="external-link">S. K. Morgan Ernest</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

