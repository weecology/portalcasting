<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="portalcasting">
<title>Adding a Model and Data • portalcasting</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Adding a Model and Data">
<meta property="og:description" content="portalcasting">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">portalcasting</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.57.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/getting_started.html">Getting Started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/current_models.html">Current Models</a>
    <a class="dropdown-item" href="../articles/adding_model_and_data.html">Adding a Model and Data</a>
    <a class="dropdown-item" href="../articles/codebase.html">Codebase</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://github.com/weecology/portalcasting/releases/tag/v0.51.0">Version 0.51.0</a>
    <a class="external-link dropdown-item" href="https://github.com/weecology/portalcasting/releases/tag/v0.50.0">Version 0.50.0</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/weecology" aria-label="Twitter">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/weecology" aria-label="GitHub">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://portal.naturecast.org" aria-label="Naturecast">
    <span class="fa fa-chart-line"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Adding a Model and Data</h1>
                        <h4 data-toc-skip class="author">Juniper L.
Simonis and Glenda M. Yenni</h4>
            
            <h4 data-toc-skip class="date">16 May, 2023</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/weecology/portalcasting/blob/HEAD/vignettes/adding_model_and_data.Rmd" class="external-link"><code>vignettes/adding_model_and_data.Rmd</code></a></small>
      <div class="d-none name"><code>adding_model_and_data.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <strong>portalcasting</strong> package provides the ability to
add functions both to a local copy of the repository for testing as well
as to contribute to the base set of models provided within the package
(and thus executed in the main repository). Similarly, users may often
want or need to analyze the data in a slightly different configuration
than what is already available. Here, we walk through the steps to add
user-defined models and data sets to the directory for local use or for
integration within the production pipeline.</p>
<p>For the purposes here, consider that you are interested in adding a
model named “newmod” to the forecasting suite. While “newmod” can work
on the existing data, you are are really interested in a slightly
different configuration (perhaps only the long-term kangaroo rat
exclosures) of the data you call “newdata”.</p>
<p>Here, we assume the user has already run through a basic
installation, set up, and evaluation of the package, as covered in the
<a href="https://weecology.github.io/portalcasting/articles/getting_started.html">Getting
Started</a> vignette.</p>
</div>
<div class="section level2">
<h2 id="model-requirements">Model requirements<a class="anchor" aria-label="anchor" href="#model-requirements"></a>
</h2>
<p>Unlike previous versions of <strong>portalcasting</strong>, starting
with v0.9.0, there are very few formal requirements for the output of a
model. The requirements have been further relaxed starting with v0.51.0,
where we now leverage the model controls lists to track and document
most functionality.</p>
<p>The forecasting pipeline will work with basically any univariate
model fitting function that will run in R, and produce an object that is
then capable of being processed by the forecasting function to forecast
the model’s predictions, so long as they can be processed via
<code><a href="../reference/process-forecast-output.html">process_model_output()</a></code>, which only requires
<code>mean</code>, <code>lower</code>, and <code>upper</code> elements.
The vast majority of the information saved about the forecasts is
located in the metadata files and controls lists, resulting in the model
itself not needing to produce much specific output to be valid.</p>
<p>Models can be based on either pre-existing functions (e.g., the
<code>AutoArima</code> model uses <code>auto.arima</code> from the
<strong>forecasting</strong> package) or specialized functions (such as
those designed for the <code>runjags</code> models in
<strong>portalcasting</strong>, which are collated into
<code>fit_runjags</code>). Each model-dataset-species combination is run
in <code><a href="../reference/portalcast.html">cast()</a></code> wrapped in a <code><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch()</a></code> call, which
softens any errors in implementation. The <code><a href="../reference/portalcast.html">cast()</a></code> call runs
a <code>do.call</code> implementation of the fit and forecast functions
from the model controls list and then passes the output of the two
functions to <code>process_model_output</code>.</p>
</div>
<div class="section level2">
<h2 id="set-up-the-directory">Set up the directory<a class="anchor" aria-label="anchor" href="#set-up-the-directory"></a>
</h2>
<p>To allow for a more flexible environment, here we use the
<code><a href="../reference/directory-creation.html">setup_sandbox()</a></code> function to make and fill our directory,
which we house at <code>"~/sandbox"</code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://weecology.github.io/portalcasting/">portalcasting</a></span><span class="op">)</span></span>
<span><span class="va">main</span> <span class="op">&lt;-</span> <span class="st">"~/sandbox"</span></span>
<span><span class="fu"><a href="../reference/directory-creation.html">setup_sandbox</a></span><span class="op">(</span>main <span class="op">=</span> <span class="va">main</span><span class="op">)</span></span></code></pre></div>
<p>The controls list for the standard, prefabricated (“prefab”) models
that come with the <strong>portalcasting</strong> package is
automatically added to the directory’s <code>models</code> sub folder,
as are the model script files for the <code>runjags</code> models.</p>
<p>Similarly, the prefabricated data sets that come with the
<strong>portalcasting</strong> package are automatically added to the
<code>data</code> subdirectory.</p>
</div>
<div class="section level2">
<h2 id="adding-a-model">Adding a model<a class="anchor" aria-label="anchor" href="#adding-a-model"></a>
</h2>
<p>A new model is added to the pipeline via (at least) additional model
controls (with additional files if needed). A starting template for
model controls is provided in the <strong>portalcasting</strong> core
files and accessible via <code><a href="../reference/new-models.html">model_controls_template()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/new-models.html">model_controls_template</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $metadata</span></span>
<span><span class="co">#&gt; $metadata$name</span></span>
<span><span class="co">#&gt; [1] "model_name"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$print_name</span></span>
<span><span class="co">#&gt; [1] "model name"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$tags</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$text</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fit</span></span>
<span><span class="co">#&gt; $fit$fun</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fit$args</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast</span></span>
<span><span class="co">#&gt; $forecast$fun</span></span>
<span><span class="co">#&gt; [1] "forecast"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast$args</span></span>
<span><span class="co">#&gt; $forecast$args$object</span></span>
<span><span class="co">#&gt; [1] "model_fit"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast$args$h</span></span>
<span><span class="co">#&gt; [1] "metadata$time$lead_time_newmoons"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast$args$level</span></span>
<span><span class="co">#&gt; [1] "metadata$confidence_level"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $interpolate</span></span>
<span><span class="co">#&gt; $interpolate$needed</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $datasets</span></span>
<span><span class="co">#&gt; $datasets$all</span></span>
<span><span class="co">#&gt; $datasets$all$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "DM"    "DO"    "DS"    "NA"    "OL"    "OT"    "PB"    "PE"   </span></span>
<span><span class="co">#&gt; [10] "PF"    "PL"    "PM"    "PP"    "RM"    "RO"    "SF"    "SH"    "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $datasets$controls</span></span>
<span><span class="co">#&gt; $datasets$controls$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "DM"    "DO"    "DS"    "NA"    "OL"    "OT"    "PB"    "PE"   </span></span>
<span><span class="co">#&gt; [10] "PF"    "PM"    "PP"    "RM"    "SF"    "SH"    "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $datasets$exclosures</span></span>
<span><span class="co">#&gt; $datasets$exclosures$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "NA"    "OL"    "OT"    "PB"    "PE"    "PF"    "PM"    "PP"   </span></span>
<span><span class="co">#&gt; [10] "RM"    "SF"    "SH"    "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response</span></span>
<span><span class="co">#&gt; $response$link</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response$type</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response$scoring_family</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $time</span></span>
<span><span class="co">#&gt; [1] "newmoon"</span></span></code></pre></div>
<div class="section level3">
<h3 id="metadata">Metadata<a class="anchor" aria-label="anchor" href="#metadata"></a>
</h3>
<p>One can create custom controls using a suite of
<code>new_model_&lt;&gt;</code> functions, each of which wraps a call to
a specific component of the <code>model_controls_template</code> inside
an <code><a href="../reference/update_list.html">update_list()</a></code> call:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/new-models.html">new_model_controls</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $metadata</span></span>
<span><span class="co">#&gt; $metadata$name</span></span>
<span><span class="co">#&gt; [1] "model_name"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$print_name</span></span>
<span><span class="co">#&gt; [1] "model name"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$tags</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$text</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fit</span></span>
<span><span class="co">#&gt; $fit$fun</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fit$args</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast</span></span>
<span><span class="co">#&gt; $forecast$fun</span></span>
<span><span class="co">#&gt; [1] "forecast"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast$args</span></span>
<span><span class="co">#&gt; $forecast$args$object</span></span>
<span><span class="co">#&gt; [1] "model_fit"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast$args$h</span></span>
<span><span class="co">#&gt; [1] "metadata$time$lead_time_newmoons"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast$args$level</span></span>
<span><span class="co">#&gt; [1] "metadata$confidence_level"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $interpolate</span></span>
<span><span class="co">#&gt; $interpolate$needed</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $datasets</span></span>
<span><span class="co">#&gt; $datasets$all</span></span>
<span><span class="co">#&gt; $datasets$all$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "DM"    "DO"    "DS"    "NA"    "OL"    "OT"    "PB"    "PE"   </span></span>
<span><span class="co">#&gt; [10] "PF"    "PL"    "PM"    "PP"    "RM"    "RO"    "SF"    "SH"    "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $datasets$controls</span></span>
<span><span class="co">#&gt; $datasets$controls$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "DM"    "DO"    "DS"    "NA"    "OL"    "OT"    "PB"    "PE"   </span></span>
<span><span class="co">#&gt; [10] "PF"    "PM"    "PP"    "RM"    "SF"    "SH"    "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $datasets$exclosures</span></span>
<span><span class="co">#&gt; $datasets$exclosures$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "NA"    "OL"    "OT"    "PB"    "PE"    "PF"    "PM"    "PP"   </span></span>
<span><span class="co">#&gt; [10] "RM"    "SF"    "SH"    "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response</span></span>
<span><span class="co">#&gt; $response$link</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response$type</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response$scoring_family</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $time</span></span>
<span><span class="co">#&gt; [1] "newmoon"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/new-models.html">new_model_metadata</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $name</span></span>
<span><span class="co">#&gt; [1] "model_name"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $print_name</span></span>
<span><span class="co">#&gt; [1] "model name"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tags</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $text</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span></span>
<span><span class="fu"><a href="../reference/new-models.html">new_model_metadata</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"newmod"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $name</span></span>
<span><span class="co">#&gt; [1] "newmod"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $print_name</span></span>
<span><span class="co">#&gt; [1] "model name"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tags</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $text</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span></span>
<span><span class="fu"><a href="../reference/new-models.html">new_model_controls</a></span><span class="op">(</span>metadata <span class="op">=</span> <span class="fu"><a href="../reference/new-models.html">new_model_metadata</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"newmod"</span>, print_name <span class="op">=</span> <span class="st">"New Model"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $metadata</span></span>
<span><span class="co">#&gt; $metadata$name</span></span>
<span><span class="co">#&gt; [1] "newmod"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$print_name</span></span>
<span><span class="co">#&gt; [1] "New Model"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$tags</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$text</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fit</span></span>
<span><span class="co">#&gt; $fit$fun</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fit$args</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast</span></span>
<span><span class="co">#&gt; $forecast$fun</span></span>
<span><span class="co">#&gt; [1] "forecast"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast$args</span></span>
<span><span class="co">#&gt; $forecast$args$object</span></span>
<span><span class="co">#&gt; [1] "model_fit"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast$args$h</span></span>
<span><span class="co">#&gt; [1] "metadata$time$lead_time_newmoons"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast$args$level</span></span>
<span><span class="co">#&gt; [1] "metadata$confidence_level"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $interpolate</span></span>
<span><span class="co">#&gt; $interpolate$needed</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $datasets</span></span>
<span><span class="co">#&gt; $datasets$all</span></span>
<span><span class="co">#&gt; $datasets$all$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "DM"    "DO"    "DS"    "NA"    "OL"    "OT"    "PB"    "PE"   </span></span>
<span><span class="co">#&gt; [10] "PF"    "PL"    "PM"    "PP"    "RM"    "RO"    "SF"    "SH"    "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $datasets$controls</span></span>
<span><span class="co">#&gt; $datasets$controls$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "DM"    "DO"    "DS"    "NA"    "OL"    "OT"    "PB"    "PE"   </span></span>
<span><span class="co">#&gt; [10] "PF"    "PM"    "PP"    "RM"    "SF"    "SH"    "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $datasets$exclosures</span></span>
<span><span class="co">#&gt; $datasets$exclosures$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "NA"    "OL"    "OT"    "PB"    "PE"    "PF"    "PM"    "PP"   </span></span>
<span><span class="co">#&gt; [10] "RM"    "SF"    "SH"    "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response</span></span>
<span><span class="co">#&gt; $response$link</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response$type</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response$scoring_family</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $time</span></span>
<span><span class="co">#&gt; [1] "newmoon"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="fit-and-cast-functions">Fit and Cast Functions<a class="anchor" aria-label="anchor" href="#fit-and-cast-functions"></a>
</h3>
<p>At the very least, each new model will need a fitting function, which
can be provided using the <code><a href="../reference/new-models.html">new_model_fit()</a></code>, with elements
for the function and arguments:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/new-models.html">new_model_fit</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="st">"arima"</span>, args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"abundance"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $fun</span></span>
<span><span class="co">#&gt; [1] "arima"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args</span></span>
<span><span class="co">#&gt; $args$x</span></span>
<span><span class="co">#&gt; [1] "abundance"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/new-models.html">new_model_controls</a></span><span class="op">(</span>metadata <span class="op">=</span> <span class="fu"><a href="../reference/new-models.html">new_model_metadata</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"newmod"</span>, print_name <span class="op">=</span> <span class="st">"New Model"</span><span class="op">)</span>,</span>
<span>                   fit      <span class="op">=</span> <span class="fu"><a href="../reference/new-models.html">new_model_fit</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="st">"arima"</span>, args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"abundance"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $metadata</span></span>
<span><span class="co">#&gt; $metadata$name</span></span>
<span><span class="co">#&gt; [1] "newmod"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$print_name</span></span>
<span><span class="co">#&gt; [1] "New Model"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$tags</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$text</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fit</span></span>
<span><span class="co">#&gt; $fit$fun</span></span>
<span><span class="co">#&gt; [1] "arima"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fit$args</span></span>
<span><span class="co">#&gt; $fit$args$x</span></span>
<span><span class="co">#&gt; [1] "abundance"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast</span></span>
<span><span class="co">#&gt; $forecast$fun</span></span>
<span><span class="co">#&gt; [1] "forecast"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast$args</span></span>
<span><span class="co">#&gt; $forecast$args$object</span></span>
<span><span class="co">#&gt; [1] "model_fit"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast$args$h</span></span>
<span><span class="co">#&gt; [1] "metadata$time$lead_time_newmoons"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forecast$args$level</span></span>
<span><span class="co">#&gt; [1] "metadata$confidence_level"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $interpolate</span></span>
<span><span class="co">#&gt; $interpolate$needed</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $datasets</span></span>
<span><span class="co">#&gt; $datasets$all</span></span>
<span><span class="co">#&gt; $datasets$all$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "DM"    "DO"    "DS"    "NA"    "OL"    "OT"    "PB"    "PE"   </span></span>
<span><span class="co">#&gt; [10] "PF"    "PL"    "PM"    "PP"    "RM"    "RO"    "SF"    "SH"    "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $datasets$controls</span></span>
<span><span class="co">#&gt; $datasets$controls$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "DM"    "DO"    "DS"    "NA"    "OL"    "OT"    "PB"    "PE"   </span></span>
<span><span class="co">#&gt; [10] "PF"    "PM"    "PP"    "RM"    "SF"    "SH"    "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $datasets$exclosures</span></span>
<span><span class="co">#&gt; $datasets$exclosures$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "NA"    "OL"    "OT"    "PB"    "PE"    "PF"    "PM"    "PP"   </span></span>
<span><span class="co">#&gt; [10] "RM"    "SF"    "SH"    "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response</span></span>
<span><span class="co">#&gt; $response$link</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response$type</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response$scoring_family</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $time</span></span>
<span><span class="co">#&gt; [1] "newmoon"</span></span></code></pre></div>
<p>Because the <code>arima</code> function already has a defined
<code>forecast</code> method, we do not need to update the
<code>cast</code> element of the model controls, as it is already
pre-loaded:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/new-models.html">new_model_forecast</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $fun</span></span>
<span><span class="co">#&gt; [1] "forecast"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args</span></span>
<span><span class="co">#&gt; $args$object</span></span>
<span><span class="co">#&gt; [1] "model_fit"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$h</span></span>
<span><span class="co">#&gt; [1] "metadata$time$lead_time_newmoons"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$level</span></span>
<span><span class="co">#&gt; [1] "metadata$confidence_level"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="datasets">Datasets<a class="anchor" aria-label="anchor" href="#datasets"></a>
</h3>
<p>By default, any new model is set to run for the three prefab datasets
(all, exclosures, controls), for each relevant species (e.g, not
including the kangaroo rats in the exclosures):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/new-models.html">new_model_datasets</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $all</span></span>
<span><span class="co">#&gt; $all$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "DM"    "DO"    "DS"    "NA"    "OL"    "OT"    "PB"    "PE"   </span></span>
<span><span class="co">#&gt; [10] "PF"    "PL"    "PM"    "PP"    "RM"    "RO"    "SF"    "SH"    "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $controls</span></span>
<span><span class="co">#&gt; $controls$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "DM"    "DO"    "DS"    "NA"    "OL"    "OT"    "PB"    "PE"   </span></span>
<span><span class="co">#&gt; [10] "PF"    "PM"    "PP"    "RM"    "SF"    "SH"    "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $exclosures</span></span>
<span><span class="co">#&gt; $exclosures$species</span></span>
<span><span class="co">#&gt;  [1] "BA"    "NA"    "OL"    "OT"    "PB"    "PE"    "PF"    "PM"    "PP"   </span></span>
<span><span class="co">#&gt; [10] "RM"    "SF"    "SH"    "total"</span></span></code></pre></div>
<p>If the specific model needs to use interpolated data, the
<code><a href="../reference/new-models.html">new_model_interpolate()</a></code> function should be given an
argument <code>needed = TRUE</code>, and then a function input, which
allows for invoking specialized functions. A simple example that is used
for the prefab models is <code><a href="../reference/round_na.interp.html">round_na.interp()</a></code>, which would be
implemented as:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/new-models.html">new_model_interpolate</a></span><span class="op">(</span>needed <span class="op">=</span> <span class="cn">TRUE</span>, fun <span class="op">=</span> <span class="st">"round_na.interp"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $needed</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fun</span></span>
<span><span class="co">#&gt; [1] "round_na.interp"</span></span></code></pre></div>
<p>which would just be added as the <code>interpolate</code> element in
<code>new_model_controls</code>.</p>
<p>The default, however, is <code>needed = FALSE</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/new-models.html">new_model_interpolate</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $needed</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="model-response">Model Response<a class="anchor" aria-label="anchor" href="#model-response"></a>
</h3>
<p>The response distribution for a model is a key aspect to scoring it
properly. We store information about the response in the list for
evaluation purposes:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/new-models.html">new_model_controls</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">response</span></span>
<span><span class="co">#&gt; $link</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $type</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $scoring_family</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>The options for each component are as follows:</p>
<p><code>link</code>: normal, negative_binomial, poisson
<code>type</code>: distribution, empirical <code>scoring_family</code>:
normal, nbinom, poisson, sample</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/new-models.html">new_model_response</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"normal"</span>, type <span class="op">=</span> <span class="st">"distribution"</span>, scoring_family <span class="op">=</span> <span class="st">"normal"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $link</span></span>
<span><span class="co">#&gt; [1] "normal"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $type</span></span>
<span><span class="co">#&gt; [1] "distribution"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $scoring_family</span></span>
<span><span class="co">#&gt; [1] "normal"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adding-the-model">Adding the Model<a class="anchor" aria-label="anchor" href="#adding-the-model"></a>
</h3>
<p>The specific updates can be called together to generate the model
controls list for newmod:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_controls</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/new-models.html">new_model_controls</a></span><span class="op">(</span>metadata <span class="op">=</span> <span class="fu"><a href="../reference/new-models.html">new_model_metadata</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"newmod"</span>, print_name <span class="op">=</span> <span class="st">"New Model"</span><span class="op">)</span>,</span>
<span>                                   fit      <span class="op">=</span> <span class="fu"><a href="../reference/new-models.html">new_model_fit</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="st">"arima"</span>, args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"abundance"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                                   response <span class="op">=</span> <span class="fu"><a href="../reference/new-models.html">new_model_response</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"normal"</span>, type <span class="op">=</span> <span class="st">"distribution"</span>, scoring_family <span class="op">=</span> <span class="st">"normal"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Given that the directory is already established, one can use the
<code><a href="../reference/new-models.html">add_new_model()</a></code> function to add the model to the directory
at main, via the controls list:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_controls</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/new-models.html">new_model_controls</a></span><span class="op">(</span>metadata <span class="op">=</span> <span class="fu"><a href="../reference/new-models.html">new_model_metadata</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"newmod"</span>, print_name <span class="op">=</span> <span class="st">"New Model"</span><span class="op">)</span>,</span>
<span>                                   fit      <span class="op">=</span> <span class="fu"><a href="../reference/new-models.html">new_model_fit</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="st">"arima"</span>, args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"abundance"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                                   response <span class="op">=</span> <span class="fu"><a href="../reference/new-models.html">new_model_response</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"normal"</span>, type <span class="op">=</span> <span class="st">"distribution"</span>, scoring_family <span class="op">=</span> <span class="st">"normal"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">added</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/new-models.html">add_new_model</a></span><span class="op">(</span>main <span class="op">=</span> <span class="va">main</span>, new_model_controls <span class="op">=</span> <span class="va">new_controls</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="../reference/prepare-models.html">read_models_controls</a></span><span class="op">(</span>main <span class="op">=</span> <span class="va">main</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt;  [1] "AutoArima"                            "sAutoArima"                           "ESSS"                                </span></span>
<span><span class="co">#&gt;  [4] "NaiveArima"                           "sNaiveArima"                          "nbGARCH"                             </span></span>
<span><span class="co">#&gt;  [7] "nbsGARCH"                             "pGARCH"                               "psGARCH"                             </span></span>
<span><span class="co">#&gt; [10] "pevGARCH"                             "jags_RW"                              "jags_logistic"                       </span></span>
<span><span class="co">#&gt; [13] "jags_logistic_covariates"             "jags_logistic_competition"            "jags_logistic_competition_covariates"</span></span>
<span><span class="co">#&gt; [16] "newmod"</span></span></code></pre></div>
<p>And the model is directly ready to be <code>portalcast</code>ed:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/portalcast.html">portalcast</a></span><span class="op">(</span>main     <span class="op">=</span> <span class="va">main</span>, </span>
<span>           models   <span class="op">=</span> <span class="st">"newmod"</span>, </span>
<span>           datasets <span class="op">=</span> <span class="st">"all"</span>, </span>
<span>           species  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DM"</span>, <span class="st">"PP"</span>, <span class="st">"total"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; Forecasting models...</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; This is portalcasting v0.51.0</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   - newmod for all DM</span></span>
<span><span class="co">#&gt;     |++++| successful |++++|</span></span>
<span><span class="co">#&gt;   - newmod for all PP</span></span>
<span><span class="co">#&gt;     |++++| successful |++++|</span></span>
<span><span class="co">#&gt;   - newmod for all total</span></span>
<span><span class="co">#&gt;     |++++| successful |++++|</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; ...forecasting complete.</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="from-the-setup-stage">From the <code>setup</code> Stage<a class="anchor" aria-label="anchor" href="#from-the-setup-stage"></a>
</h3>
<p>Incorporating the model in the establishment of the directory
requires adding the controls list to the initial
<code>setup_&lt;&gt;</code> call:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">main2</span> <span class="op">&lt;-</span> <span class="st">"~/sandbox2"</span></span>
<span><span class="fu"><a href="../reference/directory-creation.html">setup_sandbox</a></span><span class="op">(</span>main                <span class="op">=</span> <span class="va">main2</span>, </span>
<span>              new_models_controls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>newmod <span class="op">=</span> <span class="va">new_controls</span><span class="op">)</span>, </span>
<span>              models              <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/prefabricated-models.html">prefab_models</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"newmod"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="adding-a-dataset">Adding a Dataset<a class="anchor" aria-label="anchor" href="#adding-a-dataset"></a>
</h2>
<p>A new dataset is added to the pipeline much in the same way as a new
model, but with only a single generating function and fewer elements in
the controls list:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/new-datasets.html">dataset_controls_template</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $metadata</span></span>
<span><span class="co">#&gt; $metadata$name</span></span>
<span><span class="co">#&gt; [1] "dataset_name"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$tags</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$text</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fun</span></span>
<span><span class="co">#&gt; [1] "prepare_dataset"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args</span></span>
<span><span class="co">#&gt; $args$name</span></span>
<span><span class="co">#&gt; [1] "dataset_name"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$species</span></span>
<span><span class="co">#&gt;  [1] "BA" "DM" "DO" "DS" "NA" "OL" "OT" "PB" "PE" "PF" "PH" "PL" "PM" "PP" "RF"</span></span>
<span><span class="co">#&gt; [16] "RM" "RO" "SF" "SH" "SO"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$total</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$clean</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$type</span></span>
<span><span class="co">#&gt; [1] "Rodents"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$level</span></span>
<span><span class="co">#&gt; [1] "Site"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$plots</span></span>
<span><span class="co">#&gt; [1] "all"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$treatment</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$min_plots</span></span>
<span><span class="co">#&gt; [1] 24</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$min_traps</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$output</span></span>
<span><span class="co">#&gt; [1] "abundance"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$fillweight</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$unknowns</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$time</span></span>
<span><span class="co">#&gt; [1] "newmoon"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$na_drop</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$zero_drop</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$effort</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$filename</span></span>
<span><span class="co">#&gt; [1] "rodents_dataset_name.csv"</span></span></code></pre></div>
<div class="section level3">
<h3 id="metadata-1">Metadata<a class="anchor" aria-label="anchor" href="#metadata-1"></a>
</h3>
<p>One can create custom controls using a suite of
<code>new_data_&lt;&gt;</code> functions, each of which wraps a call to
a specific component of the <code>data_controls_template</code> inside
an <code><a href="../reference/update_list.html">update_list()</a></code> call:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/new-datasets.html">new_dataset_controls</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $metadata</span></span>
<span><span class="co">#&gt; $metadata$name</span></span>
<span><span class="co">#&gt; [1] "dataset_name"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$tags</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$text</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fun</span></span>
<span><span class="co">#&gt; [1] "prepare_dataset"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args</span></span>
<span><span class="co">#&gt; $args$name</span></span>
<span><span class="co">#&gt; [1] "dataset_name"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$species</span></span>
<span><span class="co">#&gt;  [1] "BA" "DM" "DO" "DS" "NA" "OL" "OT" "PB" "PE" "PF" "PH" "PL" "PM" "PP" "RF"</span></span>
<span><span class="co">#&gt; [16] "RM" "RO" "SF" "SH" "SO"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$total</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$clean</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$type</span></span>
<span><span class="co">#&gt; [1] "Rodents"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$level</span></span>
<span><span class="co">#&gt; [1] "Site"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$plots</span></span>
<span><span class="co">#&gt; [1] "all"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$treatment</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$min_plots</span></span>
<span><span class="co">#&gt; [1] 24</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$min_traps</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$output</span></span>
<span><span class="co">#&gt; [1] "abundance"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$fillweight</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$unknowns</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$time</span></span>
<span><span class="co">#&gt; [1] "newmoon"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$na_drop</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$zero_drop</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$effort</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$filename</span></span>
<span><span class="co">#&gt; [1] "rodents_dataset_name.csv"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/new-datasets.html">new_dataset_metadata</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $name</span></span>
<span><span class="co">#&gt; [1] "dataset_name"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tags</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $text</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span></span>
<span><span class="fu"><a href="../reference/new-datasets.html">new_dataset_metadata</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"newdata"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $name</span></span>
<span><span class="co">#&gt; [1] "newdata"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tags</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $text</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span></span>
<span><span class="fu"><a href="../reference/new-datasets.html">new_dataset_controls</a></span><span class="op">(</span>metadata <span class="op">=</span> <span class="fu"><a href="../reference/new-datasets.html">new_dataset_metadata</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"newdata"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $metadata</span></span>
<span><span class="co">#&gt; $metadata$name</span></span>
<span><span class="co">#&gt; [1] "newdata"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$tags</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata$text</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fun</span></span>
<span><span class="co">#&gt; [1] "prepare_dataset"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args</span></span>
<span><span class="co">#&gt; $args$name</span></span>
<span><span class="co">#&gt; [1] "dataset_name"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$species</span></span>
<span><span class="co">#&gt;  [1] "BA" "DM" "DO" "DS" "NA" "OL" "OT" "PB" "PE" "PF" "PH" "PL" "PM" "PP" "RF"</span></span>
<span><span class="co">#&gt; [16] "RM" "RO" "SF" "SH" "SO"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$total</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$clean</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$type</span></span>
<span><span class="co">#&gt; [1] "Rodents"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$level</span></span>
<span><span class="co">#&gt; [1] "Site"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$plots</span></span>
<span><span class="co">#&gt; [1] "all"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$treatment</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$min_plots</span></span>
<span><span class="co">#&gt; [1] 24</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$min_traps</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$output</span></span>
<span><span class="co">#&gt; [1] "abundance"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$fillweight</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$unknowns</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$time</span></span>
<span><span class="co">#&gt; [1] "newmoon"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$na_drop</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$zero_drop</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$effort</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $args$filename</span></span>
<span><span class="co">#&gt; [1] "rodents_dataset_name.csv"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="generating-function-and-its-arguments">Generating Function and Its Arguments<a class="anchor" aria-label="anchor" href="#generating-function-and-its-arguments"></a>
</h3>
<p>All of the existing datasets use the same generating function
<code><a href="../reference/prepare-rodents.html">prepare_dataset()</a></code>, which is quite flexible and ports
arguments directly to the generalized
<code>summarize_rodent_data()</code> from the <strong>portalr</strong>
package. We therefore include this function as the default in new
dataset controls:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/new-datasets.html">new_dataset_fun</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "prepare_dataset"</span></span></code></pre></div>
<p>although that can be changed to whatever generating function a user
may want to implement.</p>
<p>The arguments to the function can be updated via the
<code><a href="../reference/new-datasets.html">new_dataset_args()</a></code> function:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/new-datasets.html">new_dataset_args</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"newdata"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $name</span></span>
<span><span class="co">#&gt; [1] "newdata"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $species</span></span>
<span><span class="co">#&gt;  [1] "BA" "DM" "DO" "DS" "NA" "OL" "OT" "PB" "PE" "PF" "PH" "PL" "PM" "PP" "RF"</span></span>
<span><span class="co">#&gt; [16] "RM" "RO" "SF" "SH" "SO"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $total</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $clean</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $type</span></span>
<span><span class="co">#&gt; [1] "Rodents"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $level</span></span>
<span><span class="co">#&gt; [1] "Site"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $plots</span></span>
<span><span class="co">#&gt; [1] "all"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $treatment</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $min_plots</span></span>
<span><span class="co">#&gt; [1] 24</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $min_traps</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $output</span></span>
<span><span class="co">#&gt; [1] "abundance"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fillweight</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $unknowns</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $time</span></span>
<span><span class="co">#&gt; [1] "newmoon"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $na_drop</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $zero_drop</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $effort</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $filename</span></span>
<span><span class="co">#&gt; [1] "rodents_dataset_name.csv"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adding-the-dataset">Adding the Dataset<a class="anchor" aria-label="anchor" href="#adding-the-dataset"></a>
</h3>
<p>These can all be wrapped up together in a call to
<code><a href="../reference/new-datasets.html">new_dataset_controls()</a></code> to create the controls list that is
then passed into <code><a href="../reference/new-datasets.html">add_new_dataset()</a></code>:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_controls</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/new-datasets.html">new_dataset_controls</a></span><span class="op">(</span>metadata <span class="op">=</span> <span class="fu"><a href="../reference/new-datasets.html">new_dataset_metadata</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"newdata"</span><span class="op">)</span>,</span>
<span>                                     args     <span class="op">=</span> <span class="fu"><a href="../reference/new-datasets.html">new_dataset_args</a></span><span class="op">(</span>name     <span class="op">=</span> <span class="st">"newdata"</span>, </span>
<span>                                                                 filename <span class="op">=</span> <span class="st">"rodents_newdata.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Given that the directory is already established, one can use the
<code><a href="../reference/new-datasets.html">add_new_dataset()</a></code> function to add the dataset controls to
the directory at main, via the controls list, noting which existing
models should have the new dataset added to their controls list:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>new_controls <span class="ot">&lt;-</span> <span class="fu">new_dataset_controls</span>(<span class="at">metadata =</span> <span class="fu">new_dataset_metadata</span>(<span class="at">name =</span> <span class="st">"newdata"</span>),</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">args     =</span> <span class="fu">new_dataset_args</span>(<span class="at">name     =</span> <span class="st">"newdata"</span>, </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>                                                                 <span class="at">filename =</span> <span class="st">"rodents_newdata.csv"</span>))</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>added <span class="ot">&lt;-</span> <span class="fu">add_new_dataset</span>(<span class="at">main                 =</span> main, </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>                         <span class="at">new_dataset_controls =</span> new_controls, </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>                         <span class="at">models               =</span> <span class="st">"AutoArima"</span>)<span class="er">)</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">read_datasets_controls</span>(<span class="at">main =</span> main))</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "all"        "controls"   "exclosures" "newdata"</span></span></code></pre></div>
<p>And the dataset can then be forecast with:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/portalcast.html">portalcast</a></span><span class="op">(</span>main     <span class="op">=</span> <span class="va">main</span>, </span>
<span>           models   <span class="op">=</span> <span class="st">"AutoArima"</span>, </span>
<span>           datasets <span class="op">=</span> <span class="st">"newdata"</span>, </span>
<span>           species  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DM"</span>, <span class="st">"PP"</span>, <span class="st">"total"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; Forecasting models...</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; This is portalcasting v0.51.0</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   - AutoArima for newdata DM</span></span>
<span><span class="co">#&gt;     |++++| successful |++++|</span></span>
<span><span class="co">#&gt;   - AutoArima for newdata PP</span></span>
<span><span class="co">#&gt;     |++++| successful |++++|</span></span>
<span><span class="co">#&gt;   - AutoArima for newdata total</span></span>
<span><span class="co">#&gt;     |++++| successful |++++|</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; ...forecasting complete.</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="from-the-setup-stage-1">From the <code>setup</code> Stage<a class="anchor" aria-label="anchor" href="#from-the-setup-stage-1"></a>
</h3>
<p>Incorporating the dataset in the establishment of the directory
requires adding the controls list to the initial
<code>setup_&lt;&gt;</code> call:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">main3</span> <span class="op">&lt;-</span> <span class="st">"~/sandbox3"</span></span>
<span><span class="fu"><a href="../reference/directory-creation.html">setup_sandbox</a></span><span class="op">(</span>main                  <span class="op">=</span> <span class="va">main3</span>, </span>
<span>              new_datasets_controls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>newdata <span class="op">=</span> <span class="va">new_controls</span><span class="op">)</span>, </span>
<span>              datasets              <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/prefabricated-rodents-datasets.html">prefab_datasets</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"newdata"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://www.dapperstats.com/author/dr.-juniper-l.-simonis/" class="external-link">Juniper L. Simonis</a>, <a href="https://www.weecology.org/author/glenda-m.-yenni/" class="external-link">Glenda M. Yenni</a>, <a href="https://nature.arizona.edu/ellen-bledsoe" class="external-link">Ellen K. Bledsoe</a>, <a href="https://scholar.google.com/citations?user=_cBpCegAAAAJ&amp;hl=en" class="external-link">Erica M. Christensen</a>, Patricia K. T. Dumandan, <a href="https://www.weecology.org/author/henry-senyondo/" class="external-link">Henry Senyondo</a>, <a href="https://haoye.us/" class="external-link">Hao Ye</a>, <a href="https://www.weecology.org/author/ethan-white/" class="external-link">Ethan P. White</a>, <a href="https://www.weecology.org/author/morgan-ernest/" class="external-link">S. K. Morgan Ernest</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
